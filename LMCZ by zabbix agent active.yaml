zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
  templates:
    - uuid: 1a892e2fdbca4b16be42bd7e97415d52
      template: 'LMCZ by zabbix agent active'
      name: 'LMCZ by zabbix agent active'
      description: 'Шаблон для проверки состояния веб сервера ЛМЧЗ'
      groups:
        - name: Templates/Applications
      items:
        - uuid: 690bc23f3ae9485696b60df75ced62e2
          name: 'Версия базы данных «чёрного списка»'
          type: DEPENDENT
          key: lmcz.dbVersion
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.dbVersion
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: ccd3ee1ba1234f0296495785c50ed6fb
          name: 'Данные /api/v1/status'
          type: ZABBIX_ACTIVE
          key: lmcz.getStatus
          delay: 1h
          value_type: TEXT
          trends: '0'
          timeout: 30s
          tags:
            - tag: ЛМЧЗ
        - uuid: cbaa9d5034f744fbbd2b63d410fbe410
          name: 'ИНН участника оборота'
          type: DEPENDENT
          key: lmcz.inn
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.inn
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: 962991ad826f4dc89446da100d83efc0
          name: 'Идентификатор экземпляра СПО «Локальный модуль «Честный ЗНАК»'
          type: DEPENDENT
          key: lmcz.inst
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.inst
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: 007ad35cb7044343ab9b228f85608526
          name: 'Дата и время последней синхронизации'
          type: DEPENDENT
          key: lmcz.lastSync
          delay: '0'
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.lastSync
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
          triggers:
            - uuid: da8d2eedbd7b4487a4749ae3389a8492
              expression: 'last(/LMCZ by zabbix agent active/lmcz.lastSync)<(now()-86400)'
              name: '[ЛМЧЗ] Данные не синхронизировались более 1 суток'
              priority: WARNING
        - uuid: 78a16f5179f7479e9abba36762470352
          name: 'Последнее известное время запуска одной из действующих репликаций'
          type: DEPENDENT
          key: lmcz.lastUpdate
          delay: '0'
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.lastUpdate
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: 2fc8c1a953924daba6cb4326caf2dddc
          name: 'Наименование программного обеспечения'
          type: DEPENDENT
          key: lmcz.name
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.name
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: 25796218a6fe43c792fb811a05534c07
          name: 'Тип режима обслуживания'
          type: DEPENDENT
          key: lmcz.operationMode
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.operationMode
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
          triggers:
            - uuid: b89848b318c3492ca8b4b7208898abfa
              expression: 'last(/LMCZ by zabbix agent active/lmcz.operationMode)="service"'
              name: '[ЛМЧЗ] Некорректный тип режима обслуживания ({ITEM.LASTVALUE})'
              priority: AVERAGE
        - uuid: a20fc6725cbb40e784df0883dd623d1e
          name: 'Состояние репликации blocked_cis - localDocCount'
          type: DEPENDENT
          key: lmcz.replicationStatus.blocked_cis.localDocCount
          delay: '0'
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.replicationStatus.blocked_cis.localDocCount
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: ed8ce8f7a4164bfb9e9082238bf8b8ad
          name: 'Состояние репликации blocked_cis - serverDocCount'
          type: DEPENDENT
          key: lmcz.replicationStatus.blocked_cis.serverDocCount
          delay: '0'
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.replicationStatus.blocked_cis.serverDocCount
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: 75cb4828720e4271ab6a42176a272626
          name: 'Состояние репликации blocked_gtin - localDocCount'
          type: DEPENDENT
          key: lmcz.replicationStatus.blocked_gtin.localDocCount
          delay: '0'
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.replicationStatus.blocked_gtin.localDocCount
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: 6ce59d842c5f418aba50d352f52a681d
          name: 'Состояние репликации blocked_gtin - serverDocCount'
          type: DEPENDENT
          key: lmcz.replicationStatus.blocked_gtin.serverDocCount
          delay: '0'
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.replicationStatus.blocked_gtin.serverDocCount
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
        - uuid: 6a768ee733234dc08f0ce3e75661a7e3
          name: 'Признак, что Системе требуется загрузка БД'
          type: DEPENDENT
          key: lmcz.requiresDownload
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.requiresDownload
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
          triggers:
            - uuid: cecdc18c6ebe446cbbe1e7627697549a
              expression: 'last(/LMCZ by zabbix agent active/lmcz.requiresDownload)="true"'
              name: '[ЛМЧЗ] Системе требуется загрузка БД'
              priority: HIGH
        - uuid: cee8b0cf898a41258391ecb9576414f2
          name: 'Статус СПО «Локальный модуль «Честный ЗНАК»'
          type: DEPENDENT
          key: lmcz.status
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.status
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
          triggers:
            - uuid: e858bd60dc4846a5b6740f7d9270bee4
              expression: 'last(/LMCZ by zabbix agent active/lmcz.status)<>"ready"'
              name: '[ЛМЧЗ] Некорректный статус ({ITEM.LASTVALUE})'
              priority: HIGH
        - uuid: fe5493d271e44abf865b1bca8ea2a120
          name: 'Версия СПО «Локальный модуль «Честный ЗНАК»'
          type: DEPENDENT
          key: lmcz.version
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.version
          master_item:
            key: lmcz.getStatus
          tags:
            - tag: ЛМЧЗ
